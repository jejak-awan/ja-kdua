

#COPY PASTE SEMUA SCRIPT JANET DIBAWAH INI KE NEW TERMINAL MIKROTIK
#JIKA DIBUKA MENGGUNAKAN WINDOWS 11, AGAR TIDAK ERROR BUKA FILE INI DENGAN NOTEPAD++
#Link download notepad++ = https://notepad-plus-plus.org/downloads
#######################################################################

/snmp community
set [ find default=yes ] disabled=yes write-access=no
rem [find name!=public]
add addresses=172.31.192.1 name=JANET write-access=yes
/snmp
set enabled=yes trap-community=JANET trap-version=2
/system identity
set name="RO GW1 K2NET"
/sy log dis num=2
/system clock
set time-zone-autodetect=no time-zone-name=Asia/Jakarta
/radius incoming
set accept=yes port=3799
/ip dns 

set allow-remote-requests=yes
/system scheduler
rem [find name~"JANET"]
rem [find name~"JANET"]
/interface sstp-client
rem [find name~"JA"]
/interface ovpn-client
rem [find name~"JA"]
/interface l2tp-client
rem [find name~"JA"]
/ppp profile
rem [find name=JAVPN]

/system ntp client
set enabled=yes primary-ntp=162.159.200.1 secondary-ntp=162.159.200.123

/radius
rem [find]
add address=172.31.192.1 comment=JANET authentication-port=5591 accounting-port=5592 secret="306a18b78f1c09be8949" service=login,hotspot src-address=172.31.233.151 timeout=3s
/radius
set require-message-auth=no num=0

/ip hotspot profile
set [find] use-radius=yes radius-accounting=yes
set [find] radius-interim-update=0s
set [find] install-hotspot-queue=no
/ip hotspot user profile
rem [find name=JANET]
set [ find default=yes ] insert-queue-before=first parent-queue=*8
add insert-queue-before=first keepalive-timeout=10m mac-cookie-timeout=1w name=JANET transparent-proxy=yes open-status-page=always shared-users=unlimited status-autorefresh=10m
add insert-queue-before=first keepalive-timeout=10m mac-cookie-timeout=1w name="FreeAccount" transparent-proxy=yes open-status-page=always shared-users=unlimited status-autorefresh=10m
add insert-queue-before=first keepalive-timeout=10m mac-cookie-timeout=1w name="HS-5M" transparent-proxy=yes open-status-page=always shared-users=unlimited status-autorefresh=10m


/ppp profile
add change-tcp-mss=yes comment="default by JANET (jangan dirubah)" name=JAVPN only-one=yes use-encryption=yes
/interface l2tp-client
add connect-to=server2.JAcloud.biz name=JACLOUD profile=JAVPN user=knet114648804@JAcloud.id password=114648804 disabled=no

/system scheduler
rem [find name=JANETfailover]
add interval=7s name=JANETfailover on-event="{\r\
    \n:global intname JACLOUD\r\
    \n:global indexvpn ([:pick [/system clock get time] 6 8] % 20+1)\r\
    \n:global jenisvpn [/interface get \$intname type];\r\
    \n:global address \"server\$indexvpn.JAcloud.biz\"\r\
    \n:local pingresult ([/ping 172.31.192.1 interface=\$intname count=5])\r\
    \n:if (\$pingresult = 0) do={\r\
    \n     /int set \$intname disabled=no;\r\
    \n    :if ( \$jenisvpn = \"sstp-out\" ) do={ /int sstp-client set connect-\
    to=\$address comment=\"ServerVPN\$indexvpn\" [find name=\$intname] }\r\
    \n    :if ( \$jenisvpn = \"ovpn-out\" ) do={ /int ovpn-client set connect-\
    to=\$address comment=\"ServerVPN\$indexvpn\" [find name=\$intname] }\r\
    \n    :if ( \$jenisvpn = \"l2tp-out\" ) do={ /int l2tp-client set connect-\
    to=\$address comment=\"ServerVPN\$indexvpn\" [find name=\$intname] }\r\
    \n}\r\
    \n}"
    